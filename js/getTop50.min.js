function getUrlById(e){url="http://hypem.com/track/"+e+"/?ax=1",$.ajax({url:url,type:"GET",success:function(t){try{_$=cheerio.load(t)}catch(a){return console.log(a)}key=_$("#displayList-data").html(),key||console.log("No Key!");try{key=JSON.parse(key).tracks[0].key}catch(a){console.log("Can't Parse Key!")}url="http://hypem.com/serve/source/"+e+"/"+key+"?_="+Date.now(),$.ajax({url:url,type:"GET",success:function(t){pop50[e].url=t.url}})}})}function getTracksAndIds(){var e="https://api.hypem.com/v2/popular?mode=now&page=1&count=50&key=swagger";$.ajax({url:e,dataType:"json",success:function(e){for(item in e){var t=e[item];pop50[t.itemid]={track:t.title,artist:t.artist},pop50ids[item]=t.itemid,$("#tracks").append($("<li>").append($("<span>").attr("class","track").append(" "+t.title+" by "+t.artist+" - "+(parseInt(item)+1)))),getUrlById(t.itemid)}}})}var cheerio=require("cheerio");getTracksAndIds();